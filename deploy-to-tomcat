node{
   def tomcatIp = '192.168.179.131'
   def tomcatUser = 'rabiaa'
   def stopTomcat = "ssh -o StrictHostKeyChecking=no -l ${tomcatUser} ${tomcatIp} tomcat/bin/shutdown.sh"
   def startTomcat = "ssh -o StrictHostKeyChecking=no -l ${tomcatUser} ${tomcatIp} tomcat/bin/startup.sh"
   def copyWar = "scp -o StrictHostKeyChecking=no target/myweb.war -l ${tomcatUser} ${tomcatIp}:tomcat/webapps/"
   stage('Maven Build'){
     def mvnHome = tool name: 'maven', type: 'maven'
     def mvnCMD = "${mvnHome}/bin/mvn"
     sh "${mvnCMD} clean package"
   }
   
   stage('Deploy Dev'){
	   sh 'mv target/myweb*.war target/myweb.war' 
	   
       sshagent(['tomcat_jenkins']) {
			sh "${stopTomcat}"
			sh "${copyWar}"
			sh "${startTomcat}"
	   }
   }
}
